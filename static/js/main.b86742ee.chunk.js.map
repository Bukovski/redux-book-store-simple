{"version":3,"sources":["components/modal/modal.styles.jsx","components/modal/modal.jsx","redux-reducers/shopping-cart/shopping-cart.action.js","redux-reducers/shopping-cart/shopping-cart.constant.js","redux-reducers/book-list/book-list.action.js","redux-reducers/book-list/book-list.constant.js","context/bookstore-context.js","hoc/with-bookstore-service.js","components/indicators/error-indicator.jsx","components/indicators/loading-indicator.jsx","components/book-list-item/book-list-item.jsx","components/book-list/book-list.jsx","components/shop-header/shop-header.jsx","components/shop-header/index.js","components/modal-cart-table/modal-cart-table.jsx","containers/app/app.js","components/error-boundry/index.js","services/bookstore-api-fake.js","redux-reducers/book-list/book-list.reducer.js","redux-reducers/shopping-cart/shopping-cart.utils.js","redux-reducers/shopping-cart/shopping-cart.reducer.js","redux-reducers/root.reducer.js","redux-reducers/store.js","index.js"],"names":["visibleBlock","css","hiddenBlock","getToggleVisibleStyles","props","show","ModalCustomOverlayContainer","styled","div","ModalCustomContainer","Modal","nextProps","nextState","this","children","handleClose","Fragment","className","onClick","onClickCapture","Component","toggleCartHidden","type","bookAddedToCart","bookId","payload","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","WrappedContainer","ErrorIndicator","title","text","LoadingIndicator","BookListItem","book","subtitle","price","image","handleAddedToCart","src","alt","BookListContainer","books","loading","error","BookList","map","key","isbn13","connect","bookList","bindActionCreators","mapDispatchToProps","handleClick","ShopHeader","shoppingCart","orderTotal","orderQuantity","href","handleIncrease","handleDecrease","handleDelete","items","cartItems","totalCart","length","scope","item","idx","id","count","total","str","trimmed","trim","sliced","slice","splitStr","hiddenCart","role","ErrorBoundry","state","hasError","setState","BookstoreAPIFake","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","priceToFloat","parseFloat","replace","updateOrder","quantity","find","itemIndex","findIndex","createCartItem","updateCartItems","totalPrice","toFixed","updateCartItem","cartObj","orders","quantities","forEach","countOrderAndQuantity","updateShoppingCart","persistConfig","storage","whitelist","persistReducer","composeWithDevTools","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","middlewares","thunkMiddleware","composedEnhancers","applyMiddleware","store","createStore","reducer","persistor","persistStore","bookstoreAPI","app","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b86742ee.chunk.js","sourcesContent":["import styled, { css } from 'styled-components'\n\n\nconst visibleBlock = css`\n  visibility: visible;\n`;\n\nconst hiddenBlock = css`\n  opacity: 0;\n  visibility: hidden;\n`;\n\nconst getToggleVisibleStyles = props => {\n  if (props.show) {\n    return visibleBlock;\n  }\n  \n  return hiddenBlock;\n};\n\nexport const ModalCustomOverlayContainer = styled.div`\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  background: #4c4c4c;\n  transition: all .5s linear;\n  opacity: .5;\n  z-index: 20;\n\n  \n  ${ getToggleVisibleStyles }\n`;\n\nexport const ModalCustomContainer = styled.div`\n  display: inline-block;\n  padding: 23px 18px;\n  min-width: 425px;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  border-radius: 10px;\n  transform: translate(-50%,-50%);\n  margin: auto;\n  background-color: #fff;\n  transition: all .5s linear;\n  opacity: 1;\n  z-index: 30;\n  \n  ${ getToggleVisibleStyles }\n`;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ModalCustomContainer, ModalCustomOverlayContainer } from './modal.styles'\nimport './modal.css';\n\n\nclass Modal extends Component {\n  shouldComponentUpdate ( nextProps, nextState ) {\n    return nextProps.show !== this.props.show || nextProps.children !== this.props.children;\n  }\n  \n  render () {\n    const { show, children, handleClose } = this.props;\n    \n    return (\n      <React.Fragment>\n        <ModalCustomContainer show={ show }>\n          <span className=\"modal-custom__close\" onClick={ handleClose }>\n            <i className=\"modal-custom__img fa fa-close\" />\n          </span>\n          <div className=\"modal-custom__dialog\">\n            { children }\n          </div>\n        </ModalCustomContainer>\n        <ModalCustomOverlayContainer\n          show={ show }\n          onClickCapture={ handleClose }\n        />\n      </React.Fragment>\n    )\n  }\n}\n\nModal.propTypes = {\n  show: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  handleClose: PropTypes.func.isRequired\n};\n\n\nexport default Modal;","import { BOOK_HIDDEN_CART, ALL_BOOKS_REMOVED_FROM_CART, BOOK_ADDED_TO_CART,\n  BOOK_REMOVED_FROM_CART } from \"./shopping-cart.constant\";\n\n\nconst toggleCartHidden = () => ({\n  type: BOOK_HIDDEN_CART\n});\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: BOOK_ADDED_TO_CART,\n    payload: bookId\n  };\n};\n\nconst bookRemovedFromCart = (bookId) => {\n  return {\n    type: BOOK_REMOVED_FROM_CART,\n    payload: bookId\n  };\n};\n\nconst allBooksRemovedFromCart = (bookId) => {\n  return {\n    type: ALL_BOOKS_REMOVED_FROM_CART,\n    payload: bookId\n  };\n};\n\n\nexport {\n  toggleCartHidden,\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n};","export const BOOK_HIDDEN_CART = \"BOOK_HIDDEN_CART\";\nexport const BOOK_ADDED_TO_CART = \"BOOK_ADDED_TO_CART\";\nexport const BOOK_REMOVED_FROM_CART = \"BOOK_REMOVED_FROM_CART\";\nexport const ALL_BOOKS_REMOVED_FROM_CART = \"ALL_BOOKS_REMOVED_FROM_CART\";\n","import { FETCH_BOOKS_SUCCESS, FETCH_BOOKS_REQUEST, FETCH_BOOKS_FAILURE } from \"./book-list.constant\";\n\n\nconst booksRequested = () => {\n  return {\n    type: FETCH_BOOKS_REQUEST\n  }\n};\n\nconst booksLoaded = (newBooks) => {\n  return {\n    type: FETCH_BOOKS_SUCCESS,\n    payload: newBooks\n  };\n};\n\nconst booksError = (error) => {\n  return {\n    type: FETCH_BOOKS_FAILURE,\n    payload: error\n  };\n};\n\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\n  // Load data from server when page loading\n  dispatch(booksRequested());\n  \n  // get async data with server\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\n\nexport {\n  fetchBooks\n};\n","export const FETCH_BOOKS_REQUEST = \"FETCH_BOOKS_REQUEST\";\nexport const FETCH_BOOKS_SUCCESS = \"FETCH_BOOKS_SUCCESS\";\nexport const FETCH_BOOKS_FAILURE = \"FETCH_BOOKS_FAILURE\";\n\n","import React from 'react';\n\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext(null);\n\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};\n","import React from 'react';\nimport { BookstoreServiceConsumer } from 'context';\n\n\nconst withBookstoreService = (WrappedContainer) => (props) => (\n  <BookstoreServiceConsumer>\n    {\n      (bookstoreService) => {\n        return (<WrappedContainer\n          { ...props }\n          bookstoreService={ bookstoreService }\n        />);\n      }\n    }\n  </BookstoreServiceConsumer>\n);\n\n\nexport default withBookstoreService;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './error-indicator.css';\n\n\nconst ErrorIndicator = ({ title = \"game over\", text = \"Please reload page\" }) => {\n  return <div className=\"error-indicator\">\n    <h1 className=\"error-indicator__title\">{ title }</h1>\n    <span className=\"error-indicator__text\">{ text }</span>\n  </div>\n};\n\n\nErrorIndicator.propTypes = {\n  title: PropTypes.string,\n  text: PropTypes.string\n};\n\n\nexport default ErrorIndicator;\n","import React from 'react';\nimport './loading-indicator.css';\n\n\nconst LoadingIndicator = () => {\n  return <div className=\"cssload-loader\">\n    <div className=\"cssload-inner cssload-one\" />\n    <div className=\"cssload-inner cssload-two\" />\n    <div className=\"cssload-inner cssload-three\" />\n  </div>;\n};\n\n\nexport default LoadingIndicator;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './book-list-item.css';\n\n\nconst BookListItem = (props) => {\n  const { book: { title, subtitle, price, image }, handleAddedToCart } = props;\n  \n  return (\n    <div className=\"book-list__item\">\n      <div className=\"book-list__img-wrap\">\n        <img\n          className=\"book-list__img\"\n          src={ image }\n          alt={ title }\n        />\n      </div>\n      <div className=\"book-list__detail\">\n        <div className=\"book-list__content\">\n          <h3 className=\"book-list__title\">{ title }</h3>\n          <p className=\"book-list__text\">{ subtitle }</p>\n          <span className=\"book-list__price\">{ price }</span>\n        </div>\n        <button\n          onClick={ handleAddedToCart}\n          className=\"book-list__to-cart btn btn-info\"\n        >\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\n\nBookListItem.propTypes = {\n  book: PropTypes.shape({\n    title: PropTypes.string,\n    subtitle: PropTypes.string,\n    isbn13: PropTypes.string,\n    price: PropTypes.string,\n    image: PropTypes.string,\n    url: PropTypes.string\n  }),\n  handleAddedToCart: PropTypes.func\n};\n\n\nexport default BookListItem;\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { bookAddedToCart } from \"redux-reducers/shopping-cart/shopping-cart.action\";\nimport { fetchBooks } from \"redux-reducers/book-list/book-list.action\";\nimport withBookstoreService from \"hoc/with-bookstore-service\";\nimport { LoadingIndicator, ErrorIndicator } from \"components/indicators\";\nimport { BookListItem } from \"components/book-list-item\";\nimport \"./book-list.css\";\n\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    // get async data with server\n    this.props.fetchBooks();\n  }\n  \n  render() {\n    const { books, loading, error, handleAddedToCart } = this.props;\n    \n    if (loading) return <LoadingIndicator />;\n    if (error) return <ErrorIndicator\n      title=\"Sorry!\"\n      text=\"We have lost book data. But soon they will be found\"\n    />;\n  \n    return <BookList books={ books } handleAddedToCart={ handleAddedToCart }/>;\n  }\n}\n\nconst BookList = ({ books, handleAddedToCart }) => {\n  return (\n    <ul className=\"book-list\">\n      {\n        books.map((book) => (\n          <li key={ book.isbn13 } className=\"book-list__card\">\n            <BookListItem\n              book={ book }\n              handleAddedToCart={ () => handleAddedToCart(book.isbn13) }\n            />\n          </li>\n        ))\n      }\n    </ul>\n  );\n};\n\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return bindActionCreators({\n    fetchBooks: fetchBooks(bookstoreService),\n    handleAddedToCart: bookAddedToCart\n  }, dispatch);\n};\n\n\nexport default withBookstoreService(\n  connect(mapStateToProps, mapDispatchToProps)(BookListContainer)\n);\n","import React from 'react';\nimport { connect } from \"react-redux\";\nimport PropTypes from 'prop-types';\nimport './shop-header.css';\nimport { toggleCartHidden } from \"redux-reducers/shopping-cart/shopping-cart.action\";\n\n\nconst ShopHeader = ({ orderTotal, orderQuantity, handleClick }) => {\n  return (\n    <header\n      className=\"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm\">\n      <a className=\"header-shop__logo mr-md-auto\" href=\"/\">Itbook store</a>\n      <span className=\"header-shop__cart\" onClick={ handleClick }>\n        <i className=\"header-shop__cart-icon fa fa-shopping-cart\" />\n        { orderQuantity } items ${ orderTotal }\n      </span>\n    </header>\n  );\n};\n\n\nShopHeader.propTypes = {\n  orderTotal:  PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  orderQuantity: PropTypes.number,\n  handleClick: PropTypes.func\n};\n\n\n\nconst mapStateToProps = ({ shoppingCart: { orderTotal, orderQuantity } }) => {\n  return { orderTotal, orderQuantity };\n};\n\nconst mapDispatchToProps = {\n  handleClick: toggleCartHidden\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopHeader)\n","import ShopHeader from './shop-header';\n\n\nexport default ShopHeader;\n","import React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from \"redux-reducers/shopping-cart/shopping-cart.action\";\nimport PropTypes from 'prop-types';\nimport './modal-cart-table.css';\n\n\nfunction splitStr(str) {\n  const trimmed = str.trim();\n  const sliced = trimmed.slice(0, 30);\n  \n  if (trimmed.length > sliced.length) {\n    return sliced + '...';\n  }\n  \n  return sliced;\n}\n\n\nconst ModalCartTable = ({ items, totalCart, handleIncrease, handleDecrease, handleDelete }) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    \n    return (\n      <tr key={ id }>\n        <th scope=\"row\">{ idx + 1 }</th>\n        <td title={ title }>{ splitStr(title) }</td>\n        <td>{ count }</td>\n        <td>${ total }</td>\n        <td className=\"modal__wrap-btn\">\n          <button\n            className=\"btn btn-outline-danger btn-sm float-right\"\n            onClick={ () => handleDelete(id) }\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            className=\"btn btn-outline-success btn-sm float-right\"\n            onClick={ () => handleIncrease(id) }\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            className=\"btn btn-outline-warning btn-sm float-right\"\n            onClick={ () => handleDecrease(id) }\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n  \n  return (\n    <div className=\"modal__content\">\n      { items.length\n        ? <Fragment>\n          <table className=\"table\">\n            <thead>\n            <tr>\n              <th scope=\"col\">#</th>\n              <th scope=\"col\">Item</th>\n              <th scope=\"col\">Count</th>\n              <th scope=\"col\">Price</th>\n              <th scope=\"col\">Action</th>\n            </tr>\n            </thead>\n            <tbody>\n            { items.map(renderRow) }\n            </tbody>\n          </table>\n      \n          <div className=\"modal__total\">\n            Total: ${ totalCart }\n          </div>\n        </Fragment>\n        : <span className=\"modal__empty\">Your cart is empty</span>\n      }\n    </div>\n  );\n};\n\n\nModalCartTable.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string,\n      title: PropTypes.string,\n      count: PropTypes.number,\n      total: PropTypes.string\n    })\n  ),\n  totalCart:  PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  handleIncrease: PropTypes.func,\n  handleDecrease: PropTypes.func,\n  handleDelete: PropTypes.func\n};\n\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    totalCart: orderTotal\n  };\n};\n\nconst mapDispatchToProps = {\n  handleIncrease: bookAddedToCart,\n  handleDecrease: bookRemovedFromCart,\n  handleDelete: allBooksRemovedFromCart\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalCartTable);\n","import React from 'react';\nimport { Modal } from \"components/modal\";\nimport { BookList } from \"components/book-list\";\nimport ShopHeader from \"components/shop-header\";\nimport { ModalCartTable } from \"components/modal-cart-table\";\nimport './app.css';\nimport { connect } from \"react-redux\";\nimport { toggleCartHidden } from \"../../redux-reducers/shopping-cart/shopping-cart.action\";\n\n\nfunction App ({ hiddenCart, handleClick }) {\n  return (\n      <main role=\"main\" className=\"container\">\n        <ShopHeader />\n  \n        <BookList />\n        \n        <Modal show={ hiddenCart } handleClose={ handleClick }>\n          <ModalCartTable />\n        </Modal>\n      </main>\n  );\n}\n\n\nconst mapStateToProps = ({ shoppingCart: { hiddenCart } }) => {\n  return { hiddenCart };\n};\n\nconst mapDispatchToProps = {\n  handleClick: toggleCartHidden\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import React, { Component } from 'react';\nimport { ErrorIndicator } from 'components/indicators';\nimport PropTypes from 'prop-types';\n\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n  \n  static propTypes = {\n    children: PropTypes.node\n  };\n  \n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n  \n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n    \n    return this.props.children;\n  }\n}\n","export default class BookstoreAPIFake {\n  data = [\n    {\n      \"title\": \"AI Blueprints\",\n      \"subtitle\": \"How to build and deploy AI business projects\",\n      \"isbn13\": \"9781788992879\",\n      \"price\": \"$31.99\",\n      \"image\": \"https://itbook.store/img/books/9781788992879.png\",\n      \"url\": \"https://itbook.store/books/9781788992879\"\n    },\n    {\n      \"title\": \"Data Analysis with Python\",\n      \"subtitle\": \"A Modern Approach\",\n      \"isbn13\": \"9781789950069\",\n      \"price\": \"$31.99\",\n      \"image\": \"https://itbook.store/img/books/9781789950069.png\",\n      \"url\": \"https://itbook.store/books/9781789950069\"\n    },\n    {\n      \"title\": \"Build Reactive Websites with RxJS\",\n      \"subtitle\": \"Master Observables and Wrangle Events\",\n      \"isbn13\": \"9781680502954\",\n      \"price\": \"$28.98\",\n      \"image\": \"https://itbook.store/img/books/9781680502954.png\",\n      \"url\": \"https://itbook.store/books/9781680502954\"\n    },\n    {\n      \"title\": \"Forge Your Future with Open Source\",\n      \"subtitle\": \"Build Your Skills. Build Your Network. Build the Future of Technology\",\n      \"isbn13\": \"9781680503012\",\n      \"price\": \"$26.18\",\n      \"image\": \"https://itbook.store/img/books/9781680503012.png\",\n      \"url\": \"https://itbook.store/books/9781680503012\"\n    },\n    {\n      \"title\": \"Xcode Treasures\",\n      \"subtitle\": \"Master the Tools to Design, Build, and Distribute Great Apps\",\n      \"isbn13\": \"9781680505863\",\n      \"price\": \"$22.03\",\n      \"image\": \"https://itbook.store/img/books/9781680505863.png\",\n      \"url\": \"https://itbook.store/books/9781680505863\"\n    },\n    {\n      \"title\": \"Learning C++ by Building Games with Unreal Engine 4, 2nd Edition\",\n      \"subtitle\": \"A beginner's guide to learning 3D game development with C++ and UE4\",\n      \"isbn13\": \"9781788476249\",\n      \"price\": \"$44.99\",\n      \"image\": \"https://itbook.store/img/books/9781788476249.png\",\n      \"url\": \"https://itbook.store/books/9781788476249\"\n    },\n    {\n      \"title\": \"Apache Kafka Quick Start Guide\",\n      \"subtitle\": \"Leverage Apache Kafka 2.0 to simplify real-time data processing for distributed applications\",\n      \"isbn13\": \"9781788997829\",\n      \"price\": \"$23.99\",\n      \"image\": \"https://itbook.store/img/books/9781788997829.png\",\n      \"url\": \"https://itbook.store/books/9781788997829\"\n    },\n    {\n      \"title\": \"Hands-On Dark Web Analysis\",\n      \"subtitle\": \"Learn what goes on in the Dark Web, and how to work with it\",\n      \"isbn13\": \"9781789133363\",\n      \"price\": \"$29.99\",\n      \"image\": \"https://itbook.store/img/books/9781789133363.png\",\n      \"url\": \"https://itbook.store/books/9781789133363\"\n    },\n    {\n      \"title\": \"CentOS Quick Start Guide\",\n      \"subtitle\": \"Get up and running with CentOS server administration\",\n      \"isbn13\": \"9781789344875\",\n      \"price\": \"$31.99\",\n      \"image\": \"https://itbook.store/img/books/9781789344875.png\",\n      \"url\": \"https://itbook.store/books/9781789344875\"\n    },\n    {\n      \"title\": \"Machine Learning with Apache Spark Quick Start Guide\",\n      \"subtitle\": \"Uncover patterns, derive actionable insights, and learn from big data using MLlib\",\n      \"isbn13\": \"9781789346565\",\n      \"price\": \"$29.99\",\n      \"image\": \"https://itbook.store/img/books/9781789346565.png\",\n      \"url\": \"https://itbook.store/books/9781789346565\"\n    }\n  ];\n  \n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        // random chance get error for test\n        if (Math.random() > 0.75) {\n          reject(new Error('Something bad happened'));\n        } else {\n          resolve(this.data);\n        }\n      }, 1000);\n    });\n  }\n}","import { FETCH_BOOKS_FAILURE, FETCH_BOOKS_REQUEST, FETCH_BOOKS_SUCCESS } from \"./book-list.constant\"\n\n\nconst updateBookList = (state, action) => {\n  // return initialState if state not exist sate\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n  \n  switch (action.type) {\n    case FETCH_BOOKS_REQUEST:\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n    \n    case FETCH_BOOKS_SUCCESS:\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n    \n    case FETCH_BOOKS_FAILURE:\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    \n    default:\n      return state.bookList;  // get current bookList\n  }\n};\n\n\nexport default updateBookList;\n","\nconst priceToFloat = (price) => parseFloat(price.replace(/\\$/, \"\"));\n\nconst countOrderAndQuantity = (cartObj) => {\n  let orders = 0;\n  let quantities = 0;\n  \n  cartObj.forEach(({ total, count }) => {\n    orders += parseFloat(total);\n    quantities += count;\n  });\n  \n  return { orders, quantities }\n};\n\nconst updateCartItems = (cartItems, item, idx) => {\n  // if count equals 0, remove product in basket\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1)\n    ];\n  }\n  \n  // add new product on the basket. Don't need changed a count of product\n  if (idx === -1) return [ ...cartItems, item ];\n  \n  // update product on the basket and change a count of product\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  // get data from \"item\" and set default items\n  const {\n    id = book.isbn13,\n    count = 0,\n    title = book.title,\n    total = 0\n  } = item;\n  \n  const totalPrice = parseFloat(total) + quantity * priceToFloat(book.price);\n  \n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: (totalPrice).toFixed(2)\n  };\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList: { books }, shoppingCart: { hiddenCart, cartItems }} = state;\n  \n  // find book in data list and get data object\n  const book = books.find(({ isbn13 }) => isbn13 === bookId);\n  // check if the book exists in the basket.\n  // If book exist in cart, return book object if not return -1\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  // get object book from basket or \"undefined\" if the book was not found\n  const item = cartItems[ itemIndex ];\n  \n  const newItem = updateCartItem(book, item, quantity);\n  \n  const createCartItem = updateCartItems(cartItems, newItem, itemIndex);\n  const { orders, quantities } = countOrderAndQuantity(createCartItem);\n  \n  return {\n    hiddenCart: hiddenCart,\n    cartItems: createCartItem,\n    orderTotal: orders.toFixed(2),\n    orderQuantity: quantities,\n  };\n};\n\n\nexport {\n  updateOrder\n}","import { BOOK_HIDDEN_CART, BOOK_ADDED_TO_CART, BOOK_REMOVED_FROM_CART,\n  ALL_BOOKS_REMOVED_FROM_CART } from \"./shopping-cart.constant\";\nimport { updateOrder } from \"./shopping-cart.utils\"\n\n\nconst updateShoppingCart = (state, action) => {\n  // return initialState if state not exist sate\n  if (state === undefined) {\n    return {\n      hiddenCart: true,\n      cartItems: [],\n      orderTotal: 0,\n      orderQuantity: 0\n    }\n  }\n  \n  switch(action.type) {\n    case BOOK_HIDDEN_CART:\n      return { ...state.shoppingCart, hiddenCart: !state.shoppingCart.hiddenCart };\n      \n    case BOOK_ADDED_TO_CART:\n      return updateOrder(state, action.payload, 1);\n  \n    case BOOK_REMOVED_FROM_CART:\n      return updateOrder(state, action.payload, -1);\n  \n    case ALL_BOOKS_REMOVED_FROM_CART:\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload); // get a current product\n      // -item.count shod be less then item.count (5 => -5) and then remove from the cart\n      return updateOrder(state, action.payload, -item.count);\n  \n    default:\n      return state.shoppingCart;\n  }\n};\n\n\nexport default updateShoppingCart;\n","import { persistReducer } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport updateBookList from './book-list/book-list.reducer';\nimport updateShoppingCart from './shopping-cart/shopping-cart.reducer';\n\n\nconst persistConfig = {\n  key: 'root-cart',\n  storage,\n  whitelist: ['shoppingCart'] // field data name from reducer below\n};\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\n\nexport default persistReducer(persistConfig, reducer);\n","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk'\nimport logger from 'redux-logger';\nimport { persistStore } from \"redux-persist\";\nimport reducer from './root.reducer';\n\n\n// set Redux to browser\nconst composeWithDevTools =\n  typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({})\n    : compose;\n\nconst middlewares = [ thunkMiddleware ];\n\nif (process.env.NODE_ENV === 'development') {\n  middlewares.push(logger);\n}\n\nconst middlewareEnhancer = applyMiddleware(...middlewares);\nconst composedEnhancers = composeWithDevTools(middlewareEnhancer);\n\nconst store = createStore(reducer, composedEnhancers);\nconst persistor = persistStore(store);\n\n\nexport {\n  store,\n  persistor\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"font-awesome/css/font-awesome.min.css\";\n\nimport { App } from 'containers/app';\nimport ErrorBoundry from \"components/error-boundry\";\nimport { BookstoreServiceProvider } from 'context';\nimport BookstoreAPIFake from \"services/bookstore-api-fake\";\nimport { store, persistor } from 'redux-reducers/store';\n\n\nconst bookstoreAPI = new BookstoreAPIFake();\n\n\nconst app = (\n  <Provider store={ store }>\n    {\n      <ErrorBoundry>\n        <BookstoreServiceProvider value={ bookstoreAPI }>\n          <PersistGate persistor={ persistor } >\n            <App />\n          </PersistGate>\n        </BookstoreServiceProvider>\n      </ErrorBoundry>\n    }\n  </Provider>\n);\n\n\nReactDOM.render(app, document.getElementById('root'));\n"],"sourceRoot":""}